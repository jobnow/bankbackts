{"ast":null,"code":"import _toConsumableArray from\"/home/ricardo/bankpague/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/ricardo/bankpague/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ricardo/bankpague/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useCallback,useMemo}from'react';import{Link}from'react-router-dom';import{isToday,isAfter,format,parseISO}from'date-fns';import ptBR from'date-fns/locale/pt-BR';import DayPicker from'react-day-picker';import{FiPower,FiClock}from'react-icons/fi';import{useAuth}from\"../../hooks/AuthContext\";import api from\"../../services/api\";import logoImg from\"../../assets/logo.svg\";import noScheduling from\"../../assets/no-scheduling.svg\";import{Container,Header,HeaderContent,Profile,Content,Schedule,NextApointment,Section,NoScheduling,Appointment,Calendar}from'./styles';var Dashboard=function Dashboard(){var _useAuth=useAuth(),signOut=_useAuth.signOut,user=_useAuth.user;var _useState=useState(new Date()),_useState2=_slicedToArray(_useState,2),selectedDate=_useState2[0],setSelectedDate=_useState2[1];var _useState3=useState(new Date()),_useState4=_slicedToArray(_useState3,2),currentMonth=_useState4[0],setCurrentMonth=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),monthAvailability=_useState6[0],setMonthAvailability=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),appointments=_useState8[0],setAppointments=_useState8[1];var handleDateChange=useCallback(function(day,modifiers){if(modifiers.available&&!modifiers.disabled){setSelectedDate(day);}},[]);var handleMonthChange=useCallback(function(month){setCurrentMonth(month);},[]);useEffect(function(){api.get(\"/providers/\".concat(user.id,\"/month-availability\"),{params:{year:currentMonth.getFullYear(),month:currentMonth.getMonth()+1}}).then(function(response){setMonthAvailability(response.data);});},[currentMonth,user.id]);useEffect(function(){api.get('/appointments/me',{params:{year:selectedDate.getFullYear(),month:selectedDate.getMonth()+1,day:selectedDate.getDate()}}).then(function(response){var appointmentsFormatted=response.data.map(function(appointment){return _objectSpread(_objectSpread({},appointment),{},{hourFormatted:format(parseISO(appointment.date),'HH:mm')});});setAppointments(appointmentsFormatted);});},[selectedDate]);var disabledDays=useMemo(function(){var dates=monthAvailability.filter(function(monthDay){return monthDay.available===false;}).map(function(monthDay){var year=currentMonth.getFullYear();var month=currentMonth.getMonth();return new Date(year,month,monthDay.day);});return dates;},[currentMonth,monthAvailability]);var selectedDateAsText=useMemo(function(){return format(selectedDate,\"'Dia' dd 'de' MMMM\",{locale:ptBR});},[selectedDate]);var selectedWeekDay=useMemo(function(){return format(selectedDate,'cccc',{locale:ptBR});},[selectedDate]);var morningAppointments=useMemo(function(){return appointments.filter(function(appointment){return parseISO(appointment.date).getHours()<12;});},[appointments]);var afternoonAppointments=useMemo(function(){return appointments.filter(function(appointment){return parseISO(appointment.date).getHours()>=12;});},[appointments]);var nextAppointment=useMemo(function(){return appointments.find(function(appointment){return isAfter(parseISO(appointment.date),new Date());});},[appointments]);return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Header,null,/*#__PURE__*/React.createElement(HeaderContent,null,/*#__PURE__*/React.createElement(\"img\",{src:logoImg,alt:\"GoBarber\"}),/*#__PURE__*/React.createElement(Profile,null,/*#__PURE__*/React.createElement(\"img\",{src:user.avatar_url,alt:user.name}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",null,\"Bem vindo,\"),/*#__PURE__*/React.createElement(Link,{to:\"/profile\"},/*#__PURE__*/React.createElement(\"strong\",null,user.name)))),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:signOut},/*#__PURE__*/React.createElement(FiPower,null)))),/*#__PURE__*/React.createElement(Content,null,/*#__PURE__*/React.createElement(Schedule,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Hor\\xE1rios Agendados\"),/*#__PURE__*/React.createElement(\"p\",null,isToday(selectedDate)&&/*#__PURE__*/React.createElement(\"span\",null,\"Hoje\"),/*#__PURE__*/React.createElement(\"span\",null,selectedDateAsText),/*#__PURE__*/React.createElement(\"span\",null,selectedWeekDay)),isToday(selectedDate)&&nextAppointment&&/*#__PURE__*/React.createElement(NextApointment,null,/*#__PURE__*/React.createElement(\"strong\",null,\"Agendamento a seguir\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:nextAppointment.user.avatar_url,alt:nextAppointment.user.name}),/*#__PURE__*/React.createElement(\"strong\",null,nextAppointment.user.name),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(FiClock,null),nextAppointment.hourFormatted))),/*#__PURE__*/React.createElement(Section,null,/*#__PURE__*/React.createElement(\"strong\",null,\"Manh\\xE3\"),morningAppointments.length===0&&/*#__PURE__*/React.createElement(NoScheduling,null,/*#__PURE__*/React.createElement(\"img\",{src:noScheduling,alt:\"Nenhum Agendamento\"}),/*#__PURE__*/React.createElement(\"p\",null,\"Nenhum agendamento para esse per\\xEDodo...\")),morningAppointments.map(function(appointment){return/*#__PURE__*/React.createElement(Appointment,{key:appointment.id},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(FiClock,null),appointment.hourFormatted),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:appointment.user.avatar_url,alt:appointment.user.name}),/*#__PURE__*/React.createElement(\"strong\",null,appointment.user.name)));})),/*#__PURE__*/React.createElement(Section,null,/*#__PURE__*/React.createElement(\"strong\",null,\"Tarde\"),afternoonAppointments.length===0&&/*#__PURE__*/React.createElement(NoScheduling,null,/*#__PURE__*/React.createElement(\"img\",{src:noScheduling,alt:\"Nenhum Agendamento\"}),/*#__PURE__*/React.createElement(\"p\",null,\"Nenhum agendamento para esse per\\xEDodo...\")),afternoonAppointments.map(function(appointment){return/*#__PURE__*/React.createElement(Appointment,{key:appointment.id},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(FiClock,null),appointment.hourFormatted),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:appointment.user.avatar_url,alt:appointment.user.name}),/*#__PURE__*/React.createElement(\"strong\",null,appointment.user.name)));}))),/*#__PURE__*/React.createElement(Calendar,null,/*#__PURE__*/React.createElement(DayPicker,{weekdaysShort:['D','S','T','Q','Q','S','S'],fromMonth:new Date(),disabledDays:[{daysOfWeek:[0,6]}].concat(_toConsumableArray(disabledDays)),modifiers:{available:{daysOfWeek:[1,2,3,4,5]}},onMonthChange:handleMonthChange,selectedDays:selectedDate,onDayClick:handleDateChange,months:['Janeiro','Fevereiro','Março','Abril','Maio','Junho','Julho','Agosto','Setembro','Novembro','Dezembro']}))));};export default Dashboard;","map":{"version":3,"sources":["/home/ricardo/bankpague/front/src/pages/Dashboard/index.tsx"],"names":["React","useEffect","useState","useCallback","useMemo","Link","isToday","isAfter","format","parseISO","ptBR","DayPicker","FiPower","FiClock","useAuth","api","Container","Header","HeaderContent","Profile","Content","Schedule","NextApointment","Section","NoScheduling","Appointment","Calendar","Dashboard","signOut","user","Date","selectedDate","setSelectedDate","currentMonth","setCurrentMonth","monthAvailability","setMonthAvailability","appointments","setAppointments","handleDateChange","day","modifiers","available","disabled","handleMonthChange","month","get","id","params","year","getFullYear","getMonth","then","response","data","getDate","appointmentsFormatted","map","appointment","hourFormatted","date","disabledDays","dates","filter","monthDay","selectedDateAsText","locale","selectedWeekDay","morningAppointments","getHours","afternoonAppointments","nextAppointment","find","logoImg","avatar_url","name","length","noScheduling","daysOfWeek"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback, useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport { isToday, isAfter, format, parseISO } from 'date-fns';\nimport ptBR from 'date-fns/locale/pt-BR';\nimport DayPicker, { DayModifiers } from 'react-day-picker';\n\nimport { FiPower, FiClock } from 'react-icons/fi';\n\nimport { useAuth } from '~/hooks/AuthContext';\n\nimport IMonthAvailability from './interfaces/IMonthAvailability';\nimport IAppointment from './interfaces/IAppointment';\n\nimport api from '~/services/api';\n\nimport logoImg from '~/assets/logo.svg';\nimport noScheduling from '~/assets/no-scheduling.svg';\n\nimport {\n  Container,\n  Header,\n  HeaderContent,\n  Profile,\n  Content,\n  Schedule,\n  NextApointment,\n  Section,\n  NoScheduling,\n  Appointment,\n  Calendar,\n} from './styles';\n\nconst Dashboard: React.FC = () => {\n  const { signOut, user } = useAuth();\n\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n\n  const [monthAvailability, setMonthAvailability] = useState<\n    IMonthAvailability[]\n  >([]);\n\n  const [appointments, setAppointments] = useState<IAppointment[]>([]);\n\n  const handleDateChange = useCallback((day: Date, modifiers: DayModifiers) => {\n    if (modifiers.available && !modifiers.disabled) {\n      setSelectedDate(day);\n    }\n  }, []);\n\n  const handleMonthChange = useCallback((month: Date) => {\n    setCurrentMonth(month);\n  }, []);\n\n  useEffect(() => {\n    api\n      .get(`/providers/${user.id}/month-availability`, {\n        params: {\n          year: currentMonth.getFullYear(),\n          month: currentMonth.getMonth() + 1,\n        },\n      })\n      .then(response => {\n        setMonthAvailability(response.data);\n      });\n  }, [currentMonth, user.id]);\n\n  useEffect(() => {\n    api\n      .get<IAppointment[]>('/appointments/me', {\n        params: {\n          year: selectedDate.getFullYear(),\n          month: selectedDate.getMonth() + 1,\n          day: selectedDate.getDate(),\n        },\n      })\n      .then(response => {\n        const appointmentsFormatted = response.data.map(appointment => {\n          return {\n            ...appointment,\n            hourFormatted: format(parseISO(appointment.date), 'HH:mm'),\n          };\n        });\n\n        setAppointments(appointmentsFormatted);\n      });\n  }, [selectedDate]);\n\n  const disabledDays = useMemo(() => {\n    const dates = monthAvailability\n      .filter(monthDay => monthDay.available === false)\n      .map(monthDay => {\n        const year = currentMonth.getFullYear();\n        const month = currentMonth.getMonth();\n\n        return new Date(year, month, monthDay.day);\n      });\n\n    return dates;\n  }, [currentMonth, monthAvailability]);\n\n  const selectedDateAsText = useMemo(() => {\n    return format(selectedDate, \"'Dia' dd 'de' MMMM\", {\n      locale: ptBR,\n    });\n  }, [selectedDate]);\n\n  const selectedWeekDay = useMemo(() => {\n    return format(selectedDate, 'cccc', {\n      locale: ptBR,\n    });\n  }, [selectedDate]);\n\n  const morningAppointments = useMemo(() => {\n    return appointments.filter(appointment => {\n      return parseISO(appointment.date).getHours() < 12;\n    });\n  }, [appointments]);\n\n  const afternoonAppointments = useMemo(() => {\n    return appointments.filter(appointment => {\n      return parseISO(appointment.date).getHours() >= 12;\n    });\n  }, [appointments]);\n\n  const nextAppointment = useMemo(() => {\n    return appointments.find(appointment =>\n      isAfter(parseISO(appointment.date), new Date()),\n    );\n  }, [appointments]);\n\n  return (\n    <Container>\n      <Header>\n        <HeaderContent>\n          <img src={logoImg} alt=\"GoBarber\" />\n\n          <Profile>\n            <img src={user.avatar_url} alt={user.name} />\n            <div>\n              <span>Bem vindo,</span>\n              <Link to=\"/profile\">\n                <strong>{user.name}</strong>\n              </Link>\n            </div>\n          </Profile>\n\n          <button type=\"button\" onClick={signOut}>\n            <FiPower />\n          </button>\n        </HeaderContent>\n      </Header>\n\n      <Content>\n        <Schedule>\n          <h1>Horários Agendados</h1>\n          <p>\n            {isToday(selectedDate) && <span>Hoje</span>}\n            <span>{selectedDateAsText}</span>\n            <span>{selectedWeekDay}</span>\n          </p>\n\n          {isToday(selectedDate) && nextAppointment && (\n            <NextApointment>\n              <strong>Agendamento a seguir</strong>\n              <div>\n                <img\n                  src={nextAppointment.user.avatar_url}\n                  alt={nextAppointment.user.name}\n                />\n                <strong>{nextAppointment.user.name}</strong>\n                <span>\n                  <FiClock />\n                  {nextAppointment.hourFormatted}\n                </span>\n              </div>\n            </NextApointment>\n          )}\n\n          <Section>\n            <strong>Manhã</strong>\n\n            {morningAppointments.length === 0 && (\n              <NoScheduling>\n                <img src={noScheduling} alt=\"Nenhum Agendamento\" />\n                <p>Nenhum agendamento para esse período...</p>\n              </NoScheduling>\n            )}\n\n            {morningAppointments.map(appointment => (\n              <Appointment key={appointment.id}>\n                <span>\n                  <FiClock />\n                  {appointment.hourFormatted}\n                </span>\n\n                <div>\n                  <img\n                    src={appointment.user.avatar_url}\n                    alt={appointment.user.name}\n                  />\n                  <strong>{appointment.user.name}</strong>\n                </div>\n              </Appointment>\n            ))}\n          </Section>\n\n          <Section>\n            <strong>Tarde</strong>\n\n            {afternoonAppointments.length === 0 && (\n              <NoScheduling>\n                <img src={noScheduling} alt=\"Nenhum Agendamento\" />\n                <p>Nenhum agendamento para esse período...</p>\n              </NoScheduling>\n            )}\n\n            {afternoonAppointments.map(appointment => (\n              <Appointment key={appointment.id}>\n                <span>\n                  <FiClock />\n                  {appointment.hourFormatted}\n                </span>\n\n                <div>\n                  <img\n                    src={appointment.user.avatar_url}\n                    alt={appointment.user.name}\n                  />\n                  <strong>{appointment.user.name}</strong>\n                </div>\n              </Appointment>\n            ))}\n          </Section>\n        </Schedule>\n        <Calendar>\n          <DayPicker\n            weekdaysShort={['D', 'S', 'T', 'Q', 'Q', 'S', 'S']}\n            fromMonth={new Date()}\n            disabledDays={[{ daysOfWeek: [0, 6] }, ...disabledDays]}\n            modifiers={{\n              available: { daysOfWeek: [1, 2, 3, 4, 5] },\n            }}\n            onMonthChange={handleMonthChange}\n            selectedDays={selectedDate}\n            onDayClick={handleDateChange}\n            months={[\n              'Janeiro',\n              'Fevereiro',\n              'Março',\n              'Abril',\n              'Maio',\n              'Junho',\n              'Julho',\n              'Agosto',\n              'Setembro',\n              'Novembro',\n              'Dezembro',\n            ]}\n          />\n        </Calendar>\n      </Content>\n    </Container>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}